<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>BigQuery Migration</title>
</head>
<body>
    <h2>BigQuery Migration</h2>
    <label>Dataset: <input id="dataset" value="user_dataset"></label><br/>
    <label>Table: <input id="table" value="User"></label><br/>
    <button id="migrate">Migrate All Users</button>
    <div id="status"></div>
    <script>
        document.getElementById('migrate').addEventListener('click', async () => {
            const dataset = document.getElementById('dataset').value;
            const table = document.getElementById('table').value;
            const resp = await fetch('/api/migrate', { method: 'POST', headers: {'Content-Type':'application/x-www-form-urlencoded'}, body: 'dataset=' + encodeURIComponent(dataset) + '&table=' + encodeURIComponent(table) });
            const text = await resp.text();
            document.getElementById('status').innerText = text;
        });
    </script>
</body>
</html>

